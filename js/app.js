window.addEventListener("DOMContentLoaded",(()=>{console.log("Documento cargado"),caragrEventListeners(),cargarCursos(),cargarCarrito()}));const carritoTBody=document.querySelector("table#lista-carrito tbody"),vaciarCarritoBTN=document.querySelector("#vaciar-carrito");let listaCursos=document.querySelector("#lista-cursos");function caragrEventListeners(){listaCursos.addEventListener("click",agregarCursoAlCarrito),carritoTBody.addEventListener("click",borrarCurso),vaciarCarritoBTN.addEventListener("click",(()=>{carrito=[],cargarCarrito()}))}function agregarCursoAlCarrito(r){if(r.preventDefault(),r.target.classList.contains("agregar-carrito")){const o=r.target.parentElement.parentElement,t=o.querySelector("a.agregar-carrito").getAttribute("data-id"),a=!!carrito.find((r=>r.id==t));if(console.log(a),a)return void console.log("Este curso ya fuÃ© agregado al carrito");{const r={id:t,tema:o.querySelector("h4.tema-curso").textContent,instructor:o.querySelector("p.instructor").textContent,imagen:o.querySelector("img.imagen-curso").src,precio:o.querySelector("p.precio").textContent,precioPromo:o.querySelector("p.precio span.precio-promo").textContent};carrito.push(r),cargarCarrito()}}}function borrarCurso(r){if(r.target.classList.contains("borrar-curso")){const r=carritoTBody.querySelector("a").getAttribute("data-id");carrito=carrito.filter((o=>o.id!==r)),cargarCarrito()}}function cargarCursos(){console.log("cargando cursos"),cursos.forEach((r=>{listaCursos.children[1].innerHTML+=`<div class="col-4 col-md-4 col-lg-3">\n        <div class="card">\n            <img src="${r.imagen}" class="imagen-curso full-width">\n            <div class="info-card row">\n                <h4 class="tema-curso">${r.tema}</h4>\n                <p class="instructor">${r.instructor}</p>\n                <img src="img/estrellas.png">\n                <p class="precio">$${r.precio}<span class=" precio-promo float-right ">$${r.precioPromo}</span></p>\n                <a href="#" class="col-12 full-width button-primary button input agregar-carrito" data-id="${r.id}">Agregar Al Carrito</a>\n            </div>\n        </div> \x3c!--.card--\x3e\n        </div>`})),console.log("Carga de cursos finalizada")}function cargarCarrito(){for(;carritoTBody.firstChild;)carritoTBody.removeChild(carritoTBody.firstChild);console.log("cargando carrito",carrito),carrito.forEach((r=>{const{id:o,imagen:t,tema:a,precioPromo:c}=r;carritoTBody.innerHTML+=`\n                <tr>\n                    <td><img src="${t}"</td>\n                    <td>${a}</td>\n                    <td>${c}</td>\n                    <td>${o}</td>\n                    <td><a class="borrar-curso"  data-id="${o}"> Eliminar</a></td>    \n                </tr>`})),console.log("Carrito cargado")}